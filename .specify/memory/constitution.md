<!--
Sync Impact Report:
Version change: 0.0.0 → 1.1.0
Modified principles: None (initial creation)
Added sections: 
  - Core Principles (5 principles including TDD)
  - Development Workflow (TDD enforcement)
  - Governance
Modified principles: N/A (new constitution)
Templates requiring updates:
  ✅ plan-template.md - Constitution Check section exists, aligns with TDD principle
  ✅ spec-template.md - No changes needed (already test-focused)
  ✅ tasks-template.md - Already includes test-first guidance, aligns with TDD
Follow-up TODOs: None
-->

# Prometheus Example Project Constitution

## Core Principles

### I. Test-Driven Development (TDD) - NON-NEGOTIABLE

모든 기능 개발은 TDD(Test-Driven Development) 방식으로 진행되어야 합니다. Red-Green-Refactor 사이클을 엄격히 준수합니다:

- **Red**: 테스트를 먼저 작성하고, 테스트가 실패하는 것을 확인합니다
- **Green**: 테스트를 통과시키는 최소한의 코드만 작성합니다
- **Refactor**: 테스트가 통과하는 상태에서 코드를 개선합니다

**규칙**:
- 구현 코드 작성 전에 반드시 테스트를 작성해야 합니다
- 테스트가 실패하지 않으면 구현을 시작할 수 없습니다
- 모든 테스트는 독립적으로 실행 가능해야 합니다
- 테스트 커버리지는 핵심 기능에 대해 최소 80% 이상을 유지해야 합니다

**근거**: TDD는 코드 품질을 보장하고, 리팩토링에 대한 자신감을 제공하며, 명확한 요구사항 정의를 강제합니다. 이를 통해 버그를 조기에 발견하고 유지보수성을 향상시킵니다.

### II. 독립적 테스트 가능성

모든 기능과 컴포넌트는 독립적으로 테스트 가능해야 합니다:

- 외부 의존성(데이터베이스, 네트워크, 파일 시스템 등)은 모킹 또는 테스트 더블로 대체 가능해야 합니다
- 테스트는 어떤 순서로 실행되어도 동일한 결과를 보장해야 합니다
- 테스트 간 상태 공유나 의존성을 피해야 합니다

**근거**: 독립적인 테스트는 병렬 실행을 가능하게 하고, 테스트 실패의 원인을 빠르게 파악할 수 있게 합니다.

### III. 통합 테스트 필수 영역

다음 영역에서는 반드시 통합 테스트를 작성해야 합니다:

- 새로운 서비스나 컴포넌트의 계약(Contract) 테스트
- 서비스 간 통신 및 상호작용
- 공유 스키마나 데이터 모델 변경
- Kubernetes 리소스 생성 및 관리
- Prometheus 메트릭 수집 및 Grafana 연동

**근거**: 통합 테스트는 실제 환경과 유사한 조건에서 시스템의 동작을 검증하여 프로덕션 환경에서의 문제를 사전에 발견합니다.

### IV. 단순성 우선 (YAGNI)

구현은 현재 요구사항에 집중하고, 미래의 가정에 기반한 복잡성을 피해야 합니다:

- 명확한 요구사항이 없는 기능은 구현하지 않습니다
- 복잡성은 반드시 정당화되어야 하며, 더 간단한 대안이 없는 경우에만 허용됩니다
- 과도한 추상화나 패턴 적용을 피합니다

**근거**: 단순한 코드는 이해하기 쉽고, 유지보수하기 쉬우며, 버그가 적습니다. 필요할 때 리팩토링하는 것이 미리 복잡하게 만드는 것보다 낫습니다.

### V. 관찰 가능성 (Observability)

시스템은 모니터링, 로깅, 추적을 통해 관찰 가능해야 합니다:

- 모든 중요한 작업은 구조화된 로그를 남겨야 합니다
- 에러는 명확한 메시지와 컨텍스트를 포함해야 합니다
- 메트릭은 비즈니스 가치와 기술적 상태를 모두 반영해야 합니다
- 디버깅을 위한 충분한 정보를 제공해야 합니다

**근거**: 프로덕션 환경에서 문제를 진단하고 해결하기 위해서는 시스템의 내부 상태를 관찰할 수 있어야 합니다.

## Development Workflow

### TDD 강제 규칙

1. **테스트 우선 작성**: 모든 기능 구현 전에 테스트를 작성합니다
2. **실패 확인**: 작성한 테스트가 실패하는 것을 확인합니다 (Red 단계)
3. **최소 구현**: 테스트를 통과시키는 최소한의 코드만 작성합니다 (Green 단계)
4. **리팩토링**: 테스트가 통과하는 상태에서 코드 품질을 개선합니다 (Refactor 단계)
5. **커밋 규칙**: 각 TDD 사이클 완료 후 커밋합니다

### 코드 리뷰 체크리스트

모든 PR은 다음을 확인해야 합니다:

- [ ] 테스트가 구현 전에 작성되었는가?
- [ ] 테스트가 독립적으로 실행 가능한가?
- [ ] 테스트 커버리지가 충분한가?
- [ ] 통합 테스트가 필요한 영역에 작성되었는가?
- [ ] 불필요한 복잡성이 없는가?
- [ ] 로깅과 에러 처리가 적절한가?

## Governance

### 헌장 준수

이 헌장은 프로젝트의 모든 개발 활동에 우선합니다. 다른 문서나 가이드라인과 충돌할 경우 이 헌장이 우선합니다.

### 수정 절차

1. **제안**: 헌장 수정 제안은 명확한 근거와 함께 문서화되어야 합니다
2. **검토**: 팀 전체의 검토와 합의가 필요합니다
3. **버전 관리**: 수정 시 버전을 업데이트하고 변경 이력을 기록합니다
4. **템플릿 동기화**: 관련된 모든 템플릿과 문서를 업데이트합니다

### 버전 관리 정책

- **MAJOR**: 원칙 제거, 비호환성 변경, 핵심 규칙 재정의
- **MINOR**: 새로운 원칙 추가, 섹션 확장, 중요한 가이드라인 추가
- **PATCH**: 명확화, 문구 수정, 오타 수정, 의미론적이지 않은 개선

### 준수 검토

- 모든 PR은 헌장 준수를 확인해야 합니다
- 복잡성은 반드시 정당화되어야 하며 Complexity Tracking에 문서화되어야 합니다
- 테스트 우선 원칙 위반은 PR 거부 사유가 됩니다

**Version**: 1.1.0 | **Ratified**: 2024-12-01 | **Last Amended**: 2024-12-01
